<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <meta charset="utf-8">
    <title>Register</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@350&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  </head>
  <body>
   
      <div class="container" style="padding-right:20%;padding-left:20%;padding-top:10%;padding-bottom: 10%;">
        <h1 style="text-align:center;padding-bottom:5%">Welcome!</h1>
        <h6 style="text-align: center;font-style: italic;color: red;" id="errorHeader"></h6>
        <!-- Pills navs -->
      <ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
        <li class="nav-item" role="presentation">
          <a class="nav-link" id="tab-login" data-mdb-toggle="pill" href="login.html" role="tab"
            aria-controls="pills-login" aria-selected="false" style="color:blueviolet">Login</a>
        </li>
        <li class="nav-item" role="presentation">
          <a class="nav-link active" id="tab-register" data-mdb-toggle="pill" href="#pills-register" role="tab"
            aria-controls="pills-register" aria-selected="true" style="background-color:blueviolet">Register</a>
        </li>
      </ul>
    
  
    
            <!-- Email input -->
            <div class="form-outline mb-4">
              <input type="email" id="registerEmail" class="form-control" />
              <label class="form-label" for="registerEmail">Email</label>
            </div>
    
            <!-- Password input -->
            <div class="form-outline mb-4">
              <input type="password" id="registerPassword" class="form-control" />
              <label class="form-label" for="registerPassword">Password</label>
            </div>
    
    
            <!-- Submit button -->
            <button type="submit" id="registerBtn" class="btn btn-primary btn-block mb-3" style="background-color:blueviolet">Sign up</button>
        </div>
      </div>
      </div>
    
 
  
  <script type="module">

    // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-app.js";
  import { getAnalytics} from "https://www.gstatic.com/firebasejs/9.9.1/firebase-analytics.js";
  import { getAuth, createUserWithEmailAndPassword} from "https://www.gstatic.com/firebasejs/9.9.1/firebase-auth.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBq4ITcP7uAR-mXHxt_U-LtOhS5DrPdhUo",
    authDomain: "internal-assesment-e46ee.firebaseapp.com",
    databaseURL: "https://internal-assesment-e46ee-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "internal-assesment-e46ee",
    storageBucket: "internal-assesment-e46ee.appspot.com",
    messagingSenderId: "966002846365",
    appId: "1:966002846365:web:b8724b306e434a4a48c274",
    measurementId: "G-GSF9NVBJN7"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth();


  // Initialize Firebase Authentication and get a reference to the service
  $('#registerBtn').on('click',function(e){

    const registerEmail = document.querySelector("#registerEmail").value
    const registerPassword = document.querySelector("#registerPassword").value
    const errorHead = document.querySelector('#errorHeader');
    createUserWithEmailAndPassword(auth, registerEmail, registerPassword)
      .then((userCredential) => {
        const user = userCredential.user;
        location.href = "login.html"
      })
      .catch((error) => {
        if (registerPassword.length < 6){
          errorHead.textContent="Password too short. Must be atleast 6 characters."
        }
        const errorCode = error.code;
        const errorMessage = error.message;
        console.log(errorMessage)
      });

    
  });






  </script>
  </body>
</html>
